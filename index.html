<html>

<head>
    <title>AI Rubik's Cube Solver</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <script type="text/javascript" src='rubiks.js'></script>
    <script type="text/javascript" src='solver.js'></script>
    <script type="text/javascript" src='flat.js'></script>
   <style type="text/css">
	/* Add after your existing CSS */
#controls button {
  color: var(--text-color) !important;
}

/* If you want to target only the "Solve" button by its text: */
#controls button {
  /* fallback for all buttons */
  color: var(--text-color) !important;
}
#controls button:contains('Solve') {
  color: var(--text-color) !important;
}
    /* Define color variables for theming */
    :root {
        --bg-color: #fafafa;
        --text-color: #555; /* Slightly darker for better contrast */
        --logo-fill: #333;
        --button-bg: #f0f0f0;
        --button-border: #ccc;
    }

    body.dark-theme {
        --bg-color: #121212;
        --text-color: #f0f0f0; /* Slightly brighter white */
        --logo-fill: #fafafa;
        --button-bg: #333;
        --button-border: #555;
    }

    body {
        background: var(--bg-color);
        color: var(--text-color);
        transition: background 0.3s ease-in-out, color 0.3s ease-in-out;
    }

    /* Style for the buttons inside the controls div */
    #controls button,
    #controls input {
        color: var(--text-color) !important; /* Force color change */
        background-color: var(--button-bg);
        border: 1px solid var(--button-border);
        padding: 8px 12px;
        margin: 5px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1em;
        transition: background-color 0.2s ease;
    }

    #controls button:hover,
    #controls input:hover {
        background-color: var(--button-border);
    }

    /* GitHub logo link in top-right */
    #github-link {
        position: absolute;
        top: 15px;
        right: 15px;
        z-index: 10;
        transition: transform 0.2s ease-in-out;
    }

    #github-link:hover {
        transform: scale(1.1);
    }

    #github-link svg {
        fill: var(--logo-fill);
    }

    /* Theme switcher button below GitHub icon */
    #theme-switcher {
        position: absolute;
        top: 65px;  /* Positioned below the 40px GitHub icon + padding */
        right: 18px; /* Aligned with GitHub icon */
        cursor: pointer;
        background: none;
        border: none;
        padding: 0;
        z-index: 10;
        transition: transform 0.2s ease-in-out;
    }

    #theme-switcher:hover {
        transform: scale(1.1);
    }

    #theme-switcher svg {
        width: 35px;
        height: 35px;
        fill: var(--logo-fill);
    }

    /* NEW CSS for positioning the "u'" label */
    .rotation-control {
        position: relative;
    }
    .move-label {
        position: absolute;
        bottom: -20px; /* Position below the control */
        left: 50%;
        transform: translateX(-50%);
        font-size: 14px;
        font-weight: bold;
        color: var(--text-color);
        pointer-events: none; /* So the label can't be clicked */
    }

</style>

</head>

<body>
    <a href="https://github.com/knightofkalki/aero_hack_updated/blob/main/index.html" target="_blank" rel="noopener noreferrer" id="github-link" title="View on GitHub">
        <svg height="40" width="40" viewBox="0 0 16 16" version="1.1" aria-hidden="true">
            <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
        </svg>
    </a>

    <button id="theme-switcher" title="Toggle Theme">
        <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
            <path d="M448 348.6l-144-144 48-48c18.7-18.7 18.7-49.1 0-67.9l-16-16c-18.7-18.7-49.1-18.7-67.9 0l-48 48-42.2-42.2c-7.5-7.5-17.7-11.7-28.3-11.7s-20.8 4.2-28.3 11.7L4.5 149.3c-12.5 12.5-12.5 32.8 0 45.3l112 112L11.7 411.5c-7.5 7.5-11.7 17.7-11.7 28.3s4.2 20.8 11.7 28.3l22.6 22.6c12.5 12.5 32.8 12.5 45.3 0L184.3 384l112 112c12.5 12.5 32.8 12.5 45.3 0l71.2-71.2c7.5-7.5 11.7-17.7 11.7-28.3s-4.2-20.8-11.7-28.3z"/>
        </svg>
    </button>
    
    <canvas id="cube" style='position:absolute;left:15px;top:15px;'>HTML5 CANVAS</canvas>
    <div id='controls'></div>
    <div id='flat-cube'></div>

    <script type="text/javascript">
        // --- Theme Switcher Logic ---
        const themeSwitcher = document.getElementById('theme-switcher');
        const body = document.body;

        const setTheme = (theme) => {
            if (theme === 'dark') {
                body.classList.add('dark-theme');
            } else {
                body.classList.remove('dark-theme');
            }
            localStorage.setItem('theme', theme);
        };

        themeSwitcher.addEventListener('click', () => {
            const currentTheme = body.classList.contains('dark-theme') ? 'light' : 'dark';
            setTheme(currentTheme);
        });

        const savedTheme = localStorage.getItem('theme') || 'light';
        setTheme(savedTheme);


        // --- Original Rubik's Cube Logic ---
        var cube, cube2;
        var flatCube, controls;
        var run = function () {
            cube.tick();
            cube.render();
            if (cube2) {
                cube2.tick();
                cube2.render();
            }
            requestAnimationFrame(run);
        }
        var oldWidth = null;
        var reset = function () {
            var down = false;
            var parent = document.getElementById('cube').parentElement;
            var width = Math.min(parent.offsetWidth / 2 - 30, parent.offsetHeight / 5 * 3);
            if (width < 250) {
                width = window.innerWidth / 2 - 30;
            }
            if (width < 250) {
                width = window.innerWidth - 30;
                down = true;
            }
            oldWidth = width;
            cube = new RubiksCube('cube', width);
            flatCube = new FlatCube('flat-cube', width, down);
            controls = new RubiksCubeControls('controls', cube, width);

            cube.flatCube = flatCube;
            flatCube.cube = cube;
        };

        var init = function () {
            reset();
            run();
        }

        window.addEventListener('load', function () {
            init(); // This creates the controls

            // --- NEW JAVASCRIPT to add the "u'" label ---
            // We add a small delay to ensure the controls are fully rendered by the other script.
            setTimeout(() => {
                // This selector targets the button for the U' move.
                // It looks for the second "button" (div) inside the third control group (div).
                // NOTE: This selector is a guess. If it doesn't work, you may need to
                // inspect the page with developer tools to find the correct path.
                const targetButton = document.querySelector('#controls > div > div:nth-child(3) > div:nth-child(2)');

                if (targetButton) {
                    // Add a class to the button to apply relative positioning for the label
                    targetButton.classList.add('rotation-control');

                    // Create the label element
                    const uLabel = document.createElement('span');
                    uLabel.className = 'move-label';
                    uLabel.textContent = "u'";

                    // Add the label to the button
                    targetButton.appendChild(uLabel);
                } else {
                    console.log("Could not find the target rotation button to add the 'u`' label.");
                }
            }, 500); // Wait 500 milliseconds for the original script to finish.

        }, false);

        window.addEventListener('resize', function () {
            var down = false;
            var parent = document.getElementById('cube').parentElement;
            var width = Math.min(parent.offsetWidth / 2 - 30, parent.offsetHeight / 5 * 3);
            if (width < 250) {
                width = window.innerWidth / 2 - 30;
            }
            if (width < 250) {
                width = window.innerWidth - 30;
                down = true;
            }
            if (width == oldWidth) {
                return;
            }
            oldWidth = width;
            cube.updateSize(width);
            controls.setWidth(width);
            flatCube = new FlatCube('flat-cube', width, down);
            cube.flatCube = flatCube;
            flatCube.cube = cube;
            cube.update();
            flatCube.update();
        });
    </script>

</body>
</html>
